var app=angular.module("app",["ngRoute","ui.bootstrap","restangular","pasvaz.bindonce"]);app.run(["$rootScope","$http","$location","$route",function(){}]),app.config(["$routeProvider",function(e){e.when("/orders",{templateUrl:"assets/partials/orders/index.html",controller:"OrdersCtrl",active:"home"}).when("/orders/edit",{templateUrl:"assets/partials/orders/entry-form.html",controller:"OrderEntryCtrl",active:"users"}).otherwise({redirectTo:"/orders"})}]),angular.module("app").controller("OrderEntryCtrl",["$scope","api_connector",function(e,t){e.master={customer:{},driver:{},donation:{date:(new Date).setHours(0,0,0,0),dateActual:new Date,prescribed_weight:0,nonprescribed_weight:0,total_donation_weight:0}},e.form=angular.copy(e.master),e.addCollectionInformation=function(){t.sendCollectionDetails(e.form).then(function(){})},e.updateTotalWeight=function(){form.donation.total_donation_weight=form.donation.prescribed_weight+form.donation.nonprescribed_weight}}]),angular.module("app").controller("OrdersCtrl",["$scope","api_connector",function(e,t){e.orders=[{name:"blah1"},{name:"blah2"},{name:"blah3"}];var o=function(e){return Object.keys(e).map(function(t){var o=e[t];return o._id=t,console.log(o),o})};e.onDateChange=function(){},e.getOrders=function(r){var n=new Date(r.setHours(0,0,0,0)).getTime();t.getOrdersByDate(n).then(function(t){e.orders=o(t.data)})},e.getOrders(new Date)}]),angular.module("app").directive("order",function(){return{restrict:"E",replace:!0,scope:{order:"="},templateUrl:"assets/partials/orders/order.html",link:function(){}}}),angular.module("app").service("api_connector",["$http","$location",function(e,t){console.log(t.$$host);var o="localhost"==t.$$host?"http://localhost:8081/api/":"https://substation33.herokuapp.com/api/",r=function(t){return e({method:"GET",url:o+"collections/"+t})},n=function(t){return e({method:"GET",url:o+"collection/"+t})},a=function(t){return e({method:"POST",url:o+"collection"+(t._id?"?key="+t._id:""),headers:{"Content-Type":"application/json"},data:t})};return{getOrdersByDate:r,getOrderByKey:n,sendCollectionDetails:a}}]),angular.module("app").run(["$templateCache",function(e){e.put("assets/partials/index.html","Home"),e.put("assets/partials/orders/entry-form.html",'<div>Enter a new order:<form><section><h2>Customer</h2><span>Name:</span> <input type="text" ng-model="form.customer.name"> <span>Address:</span> <input type="text" ng-model="form.customer.address"> <span>email:</span> <input type="text" ng-model="form.customer.email"> <span>Phone Number:</span> <input type="text" ng-model="form.customer.contact_number"></section><section><h2>Driver</h2></section><section><h2>Donation Details</h2><span>Prescribed:</span> <input type="number" ng-model="form.donation.prescribed_weight" ng-change="updateTotalWeight()"> <span>Non-Prescribed:</span> <input type="number" ng-model="form.donation.nonprescribed_weight" ng-change="updateTotalWeight()"> <span>Total:</span><div>{{ form.donation.total_donation_weight }}</div></section><section><span>Collected?</span> <input type="checkbox" ng-model="form.donation.collected"></section></form><button ng-click="addCollectionInformation()"></button></div>'),e.put("assets/partials/orders/index.html",'<div><div class="absolute top--4-4 right-0"><div class="pt1"></div><a class="block grow rounded h4 p1 bg-white bg-dark-green-hover green white-hover text-decoration-none shadow" href="#/orders/edit">+ New</a></div>Orders:<order ng-repeat="order in orders track by $index" order="order"></order></div>'),e.put("assets/partials/orders/order.html","<div>{{ order.customer.name }}</div>")}]);