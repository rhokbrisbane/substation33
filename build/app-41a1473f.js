var app=angular.module("app",["ngRoute","ui.bootstrap","restangular","pasvaz.bindonce"]);app.run(["$rootScope","$http","$location","$route",function(){}]),app.config(["$routeProvider",function(e){e.when("/orders",{templateUrl:"assets/partials/orders/index.html",controller:"OrdersCtrl",active:"home"}).when("/orders/edit",{templateUrl:"assets/partials/orders/entry-form.html",controller:"OrderEntryCtrl",active:"users"}).otherwise({redirectTo:"/orders"})}]),angular.module("app").directive("order",function(){return{restrict:"E",replace:!0,scope:{order:"="},templateUrl:"assets/partials/orders/order.html",link:function(){}}}),angular.module("app").service("api_connector",["$http",function(e){var t="http://localhost:8081/api/",o=function(o){return e({method:"GET",url:t+"collections/"+o})},r=function(o){return e({method:"GET",url:t+"collection/"+o})},n=function(o){return e({method:"POST",url:t+"collection"+(o._id?"?key="+o._id:""),headers:{"Content-Type":"application/json"},data:o})};return{getOrdersByDate:o,getOrderByKey:r,sendCollectionDetails:n}}]),angular.module("app").controller("OrderEntryCtrl",["$scope","api_connector",function(e,t){e.master={customer:{},driver:{},donation:{date:(new Date).setHours(0,0,0,0),dateActual:new Date,prescribed_weight:0,nonprescribed_weight:0,total_donation_weight:0}},e.form=angular.copy(e.master),e.addCollectionInformation=function(){t.sendCollectionDetails(e.form).then(function(){})},e.updateTotalWeight=function(){form.donation.total_donation_weight=form.donation.prescribed_weight+form.donation.nonprescribed_weight}}]),angular.module("app").controller("OrdersCtrl",["$scope","api_connector",function(e,t){e.orders=[{name:"blah1"},{name:"blah2"},{name:"blah3"}];var o=function(e){return Object.keys(e).map(function(t){var o=e[t];return o._id=t,console.log(o),o})};e.onDateChange=function(){},e.getOrders=function(r){var n=new Date(r.setHours(0,0,0,0)).getTime();t.getOrdersByDate(n).then(function(t){e.orders=o(t.data)})},e.getOrders(new Date)}]),angular.module("app").run(["$templateCache",function(e){e.put("assets/partials/index.html","Home"),e.put("assets/partials/orders/entry-form.html",'<div><p class="inline-block pb2 h2 mt1 light">Enter a new order</p><form><section><p class="h3">Customer</p><span class="h6 inline-block caps pt2 bold">Name:</span> <input type="text" ng-model="form.customer.name"> <span class="h6 inline-block caps pt2 bold">Address:</span> <input type="text" ng-model="form.customer.address"> <span class="h6 inline-block caps pt2 bold">email:</span> <input type="text" ng-model="form.customer.email"> <span class="h6 inline-block caps pt2 bold">Phone Number:</span> <input type="text" ng-model="form.customer.contact_number"></section><section class="pt2"><p class="h3">Driver</p></section><sectioni class="pt3"><p class="h3">Donation Details</p><span class="h6 inline-block caps pt2 bold">Prescribed:</span> <input type="number" ng-model="form.donation.prescribed_weight" ng-change="updateTotalWeight()"> <span class="h6 inline-block caps pt2 bold">Non-Prescribed:</span> <input type="number" ng-model="form.donation.nonprescribed_weight" ng-change="updateTotalWeight()"> <span class="h6 inline-block caps pt2 bold">Total:</span><div>{{ form.donation.total_donation_weight }}</div><section><span class="h6 inline-block caps pt2 bold">Collected?</span> <input type="checkbox" ng-model="form.donation.collected"></section></sectioni></form><br><button class="clearfix right p1 h4 white bg-blue-hover rounded grow" ng-click="addCollectionInformation()">Submit</button><div class="clearfix"></div></div>'),e.put("assets/partials/orders/index.html",'<div><div class="absolute top--4-4 right-0"><div class="pt1"></div><a class="block grow rounded h4 p1 bg-white bg-dark-green-hover green white-hover text-decoration-none shadow" href="#/orders/edit">+ New</a></div><p class="h3 mt1">Orders</p><order ng-repeat="order in orders track by $index" order="order"></order></div>'),e.put("assets/partials/orders/order.html",'<div class="bg-dark-green bg-blue-hover grow-small white rounded p2 mt1">{{ order.customer.name }}</div>')}]);